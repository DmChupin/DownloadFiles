# DownloadFiles
Загрузка файлов средствами Android

Для вызова сервиса в MainActivity используем startService(Intent intent), для прекращения работы сервиса вызываем stopService.

В манифесте прописываем блок <service ..></service>, в котором прописано называние нашего сервиса и дополнительные свойства.

Для возможности записи файла дополнительно прописал метод getPermissions(), который вызывается в MainActivity.

Для создания службы необходимо унаследовать ее от класса Service. В текущей программе были переопределены следующие методы:
1. onCreate() срабатывает при самом первом запуске службы. Также запускает registerReceiver для отслеживания конца загрузки. 
2. onStartCommand() срабатывает при каждом вызове службы(в данном случае при клике на загрузку). Соттветственно вызов самой функции загрузки файла.
3. onDestroy() срабатывает при остановке службы. В данном случае на основной активити есть кнопка оставить загрузку, которая вызывает данный метод. Останавливаются все незавершенные загрузки.

Для скачивания файлов используется DownloadManager, которому передается uri файла. При старте загрузки - загрузка помещается в очередь.

Также имеется BroadcastReceiver, который отслуживает конец загрузки файла и выдает пользователю уведомление.
